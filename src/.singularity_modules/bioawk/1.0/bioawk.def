Bootstrap: docker
From: ubuntu:18.04

%labels
MAINTAINER Laurent Modolo

%post
mkdir -p /sps /pbs /scratch
BIOAWK_VERSION=1.0
PACKAGES="git \
   build-essential \
   ca-certificates \
   zlib1g-dev \
   byacc"

apt-get update && \
apt-get install -y --no-install-recommends ${PACKAGES} && \
apt-get clean

git clone https://github.com/lh3/bioawk.git && \
  cd bioawk && \
  git checkout tags/v${BIOAWK_VERSION} && \
  make && \
  cd .. && \
  mv bioawk/bioawk /usr/bin/ && \
  rm -Rf bioawk

%environment
export BIOAWK_VERSION=1.0

%runscript
exec /bin/bash "$@"

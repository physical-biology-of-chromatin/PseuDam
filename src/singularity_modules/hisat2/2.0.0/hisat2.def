Bootstrap: docker
From: ubuntu:18.04

%labels
MAINTAINER Nicolas Fontrodona

%post
HISAT2_VERSION=2.0.0
PACKAGES="unzip \
gcc \
g++ \
make \
curl \
ca-certificates"

apt-get update && \
apt-get install -y --no-install-recommends ${PACKAGES} && \
apt-get clean

curl -k -L http://ccb.jhu.edu/software/hisat2/downloads/hisat2-${HISAT2_VERSION}-beta-source.zip -o hisat2_linux-v${HISAT2_VERSION}.zip && \
unzip hisat2_linux-v${HISAT2_VERSION}.zip && \
cd hisat2-${HISAT2_VERSION}-beta && \
make && \
cp hisat2 /usr/bin && \
cp hisat2-* /usr/bin && \
rm -Rf hisat2-${HISAT2_VERSION}-beta

%environment
export HISAT2_VERSION=2.0.0

%runscript
exec /bin/bash "$@"

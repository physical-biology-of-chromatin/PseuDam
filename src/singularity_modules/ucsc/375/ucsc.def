Bootstrap: docker
From: debian:jessie

%labels
MAINTAINER Laurent Modolo

%pos
mkdir -p /sps /pbs /scratch
UCSC_VERSION=375
PACKAGES="apt-utils \
             curl \
             build-essential \
             libssl-dev \
             libpng-dev \
             uuid-dev \
             libmysqlclient-dev \
             rsync"

apt-get update && \
apt-get install -y --no-install-recommends ${PACKAGES} && \
apt-get clean

curl -k -L http://hgdownload.soe.ucsc.edu/admin/exe/userApps.v${UCSC_VERSION}.src.tgz -o userApps.v${UCSC_VERSION}.src.tgz &&\
tar xvf userApps.v${UCSC_VERSION}.src.tgz &&\
cd userApps/ && \
make &&\
cd .. &&\
mv userApps/bin/* /usr/bin/ &&\
rm -R userApps.v${UCSC_VERSION}.src.tgz &&\
rm -R userApps

%environment
export UCSC_VERSION=375

%runscript
exec /bin/bash "$@"


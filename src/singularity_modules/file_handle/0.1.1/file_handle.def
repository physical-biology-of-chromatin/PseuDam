Bootstrap: docker
From: ubuntu:18.04

%labels
MAINTAINER Laurent Modolo

%pos
mkdir -p /sps /pbs /scratch

FILE_HANDLE_VERSION=0.1.1
PACKAGES="git \
ca-certificates "

apt-get update && \
apt-get install -y --no-install-recommends ${PACKAGES} && \
apt-get clean

git clone https://github.com/LBMC/file_handle.git && \
cd file_handle && \
git checkout tags/v${FILE_HANDLE_VERSION} && \
cp src/file_handle.py /usr/bin/file_handle.py && \
chmod +x /usr/bin/file_handle.py

%environment
export FILE_HANDLE_VERSION=0.1.1

%runscript
exec /bin/bash "$@"
